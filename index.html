<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8" />
		<!-- import of webgl utilities -->
        <script src="./js/commonFunctions.js"></script>
        <script src="./js/gl-matrix.js"></script>
        <script src="./js/webglTools.js"></script>
		
		<style>
			#canvas-container{
				position:relative;
				width:500px;
				height:500px;
			}
			.game-menu{
				display:none;
				position:absolute;
				top:0;
				width:100%;
				height:100%;
				background-color:rgba(0,0,0,0.8);
				color:white;
			}
			.game-menu-content{
				padding:70px;
			}
		</style>
		
		<!-- vertex shader -->
        <script id="shader-vs" type="x-shader/x-vertex">
            attribute vec3 aVertexPosition;
			attribute vec4 aColor;
			uniform mat4 uMVMatrix;
			uniform mat4 uPMatrix;
			varying vec4 vColor;

			uniform float uSize;

			void main(void) {
			    float a= aVertexPosition.z/(uSize*2.0) + 0.5;
				vColor = aColor * (vec4(a,a,a,1.0));
				gl_PointSize=12.0;
				gl_PointSize=(aVertexPosition.z+8.0)*1.0;
				gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
			}            
        </script>
		
		<!-- fragment shader -->
        <script id="shader-fs" type="x-shader/x-fragment">
			#ifdef GL_ES
				precision highp float;
			#endif
				varying vec4 vColor;
				void main(void) {
				  gl_FragColor = vColor;
				}
        </script>
    </head>
	<!-- initialize webgl onload -->
    <body>
		<div id="container">
			
			<main>
				<div id="canvas-container">
					<!-- webgl canvas -->
					<canvas id="webgl-canvas" width="500" height="500">
					  HTML5 is not supported
					</canvas>
					<div class="game-menu" id="pause-menu">
						<div class="game-menu-content">
							<h2>Pause</h2>
							<p>Appuyez sur Espace pour reprendre le jeu</p>
						</div>
					</div>
					<div class="game-menu" id="gameover-menu">
						<div class="game-menu-content">
							<h2>Game Over</h2>
							<p>Votre score : <span id="gameover-score">0</span></p>
							<p>Rechargez la page pour recommencer</p>
						</div>
					</div>
				</div>
			</main>
			
			<aside>
				<p>
					Score : <span id="score">0</span>
				</p>
			</aside>
		</div>
		
        <audio id="bonusSound" src="2011.wav"></audio>
        <audio id="gameOverSound" src="2019.wav"></audio>

        <!-- import application scripts -->
		<script src="./js/mouseMotionHandling.js"></script>
        <script src="drawables.js"></script>
        <script src="snake.js"></script>
        <script src="scene.js"></script>
    </body>
</html>